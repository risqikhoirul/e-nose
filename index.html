<script src="./model_e_nose.js"></script>
<script>
  // --- Ambil parameter dari URL ---
  const q = new URLSearchParams(location.search);
  const MQ135 = parseFloat(q.get("MQ135"));
  const MQ9   = parseFloat(q.get("MQ9"));
  const suhu  = parseFloat(q.get("suhu"));

  let hasil = "test"; // default jika parameter belum diisi

  // --- Jalankan prediksi jika parameter lengkap ---
  if (!isNaN(MQ135) && !isNaN(MQ9) && !isNaN(suhu)) {
    // urutan input harus sesuai urutan fitur saat training di Python
    const input = [MQ135, MQ9, suhu];

    // panggil fungsi hasil export model m2cgen
    const pred = score(input); // output array [prob_basi, prob_segar]
    hasil = pred[0] > pred[1] ? "Makanan Basi" : "Makanan Segar";
  }

  // --- Output plain text agar bisa dibaca ESP32 ---
  document.open("text/plain");
  document.write(hasil);
  document.close();
</script>
