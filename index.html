<script src="rf_model.js"></script>
<script>
  // Ambil parameter dari URL
  const q = new URLSearchParams(location.search);
  const MQ135 = parseFloat(q.get("MQ135"));
  const MQ9   = parseFloat(q.get("MQ9"));
  const suhu  = parseFloat(q.get("suhu"));

  let hasil = "Tidak ada makanan";

  if (!isNaN(MQ135) && !isNaN(MQ9) && !isNaN(suhu)) {
    // Ambil bobot dari model JS
    const w = rf_model.weights;
    const t = rf_model.threshold;

    // Rumus mirip test_model() di Python
    const skor = MQ135 * w[0] + MQ9 * w[1] + suhu * w[2];
    hasil = skor > t ? rf_model.classes[1] : rf_model.classes[0];
  }

  // Output plain text agar ESP32 bisa baca langsung
  document.open("text/plain");
  document.write(hasil);
  document.close();
</script>
